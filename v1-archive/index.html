<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#ff7a24" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="description" content="レシピを集めて、レシピセットで1週間を回す。買い物リストも自動で整うレシピループ。" />
    <title>Kondate Loop | レシピとレシピセットで回す1週間</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🥘</text></svg>" />
  </head>
  <body>
    <div class="background-shape" aria-hidden="true"></div>
    <div class="background-shape background-shape--alt" aria-hidden="true"></div>

    <!-- PC Global Navigation -->
    <nav class="global-nav" id="globalNav" hidden>
      <div class="global-nav__inner">
        <a href="#landing" class="global-nav__logo">
          <span class="global-nav__logo-icon material-symbols-rounded">skillet</span>
          <span class="global-nav__logo-text">Kondate Loop</span>
        </a>
        <div class="global-nav__links">
          <button type="button" class="global-nav__link" data-nav="kondate">
            <span class="global-nav__link-icon material-symbols-rounded">format_list_bulleted</span>
            今週
          </button>
          <button type="button" class="global-nav__link" data-nav="publicRecipes">
            <span class="global-nav__link-icon material-symbols-rounded">search</span>
            探索
          </button>
          <button type="button" class="global-nav__link" data-nav="recipes">
            <span class="global-nav__link-icon material-symbols-rounded">favorite</span>
            お気に入り
          </button>
        </div>
      </div>
    </nav>

    <div class="page">
      <!-- Landing Section -->
      <section class="landing" id="landing" aria-labelledby="landingTitle">
        <div class="landing__hero">
          <p class="eyebrow">Recipe First Loop</p>
          <h1 id="landingTitle">Kondate Loop</h1>
          <p class="landing__lead">
            レシピを味方にして、<br />
            <strong>レシピセットで1週間を回す。</strong><br />
            今日はセットから選ぶだけ。
          </p>
          <div class="landing__actions">
            <button type="button" class="button--ghost" id="enterApp">
              セットを選ぶ
            </button>
            <button type="button" class="button--primary" id="enterRecipes">
              レシピを登録する
            </button>
            <p class="landing__note">アカウント登録不要・この端末だけに保存</p>
          </div>
        </div>

        <div class="landing__overview">
          <div class="landing__grid">
            <article class="landing__card">
              <span class="landing__card-icon material-symbols-rounded">menu_book</span>
              <h2>レシピが最小単位</h2>
              <p>よく作る料理をレシピとしてストック。タグで自分だけの図鑑に育てる。</p>
            </article>
            <article class="landing__card">
              <span class="landing__card-icon material-symbols-rounded">auto_awesome</span>
              <h2>レシピセットで束ねる</h2>
              <p>1週間の雰囲気をセットで選ぶ。迷いを減らして、気分の余白は残す。</p>
            </article>
            <article class="landing__card">
              <span class="landing__card-icon material-symbols-rounded">restaurant</span>
              <h2>今日の選択は軽く</h2>
              <p>セットの中から今日作るものを選ぶだけ。予定に縛られない。</p>
            </article>
            <article class="landing__card">
              <span class="landing__card-icon material-symbols-rounded">shopping_cart</span>
              <h2>買い物リスト自動生成</h2>
              <p>選んだレシピの食材を自動集計。人数に合わせて分量も調整。</p>
            </article>
          </div>

          <div class="landing__steps">
            <h2>3ステップで使える</h2>
            <ol class="steps">
              <li><strong>レシピを集める</strong> — URLやテキストからレシピを登録</li>
              <li><strong>レシピセットを選ぶ</strong> — 1週間の雰囲気をレシピセットで決める</li>
              <li><strong>今日のレシピを選ぶ</strong> — セットから選んで買い物リストへ</li>
            </ol>
          </div>
        </div>
      </section>

      <!-- App Section (今週のセット料理) -->
      <section class="app" id="app" hidden>
        <div class="app__nav">
          <button type="button" class="button--ghost button--small" id="backToLanding">
            使い方
          </button>
          <button type="button" class="button--ghost button--small" id="openPublicRecipesFromApp">
            探索
          </button>
          <button type="button" class="button--ghost button--small" id="openRecipesFromApp">
            お気に入り
          </button>
        </div>

        <header class="hero">
          <a href="#landing" class="hero__help-link" id="helpLinkApp">
            <span class="material-symbols-rounded">help_outline</span>
            使い方
          </a>
          <div class="hero__text">
            <p class="eyebrow">Weekly Recipe Picks</p>
            <h1>今週のセット料理</h1>
            <p class="hero__lead">
              レシピセットを適用して、<br />
              今日作るものを選ぶだけ。
            </p>
          </div>
          <div class="hero__meta">
            <div class="meta__item">
              <span class="meta__label">最小単位</span>
              <span class="meta__value">レシピ</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">レシピセット</span>
              <span class="meta__value">レシピ集合</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">買い物</span>
              <span class="meta__value">自動集計</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">保存</span>
              <span class="meta__value">ローカル</span>
            </div>
          </div>
        </header>

        <main class="app-content">
          <!-- 1. 食材リスト（折りたたみ可能） -->
          <details class="checklist-collapsible" id="shoppingCollapsible">
            <summary class="checklist-collapsible__toggle">
              <span class="material-symbols-rounded">shopping_cart</span>
              <span>食材リスト</span>
              <span class="checklist-collapsible__count" id="shoppingCount"></span>
              <span class="material-symbols-rounded checklist-collapsible__icon">expand_more</span>
            </summary>
            <section class="checklist" aria-labelledby="shoppingTitle">
              <div class="checklist__header">
                <div>
                  <p class="eyebrow">Shopping List</p>
                  <h2 id="shoppingTitle">食材リスト</h2>
                  <p class="checklist__lead">
                    選んだレシピの食材を人数に合わせて集計
                  </p>
                </div>
              </div>
              <ul class="checklist__list" id="shoppingList"></ul>
              <p class="checklist__empty" id="shoppingEmpty">
                レシピを選択すると買い物リストが表示されます
              </p>
            </section>
          </details>

          <!-- 2. 今週のセット料理コントロール -->
          <section class="pool-controls">
            <div class="pool-controls__left">
              <p class="pool-controls__label">今週のセット料理</p>
              <div class="week-range" id="weekRange"></div>
              <label class="control control--hidden" for="weekStart">
                <span>週の開始日</span>
                <input id="weekStart" type="date" />
              </label>
              <div class="pool-controls__buttons">
                <button type="button" class="button--ghost button--small" id="prevWeek">前の週</button>
                <button type="button" class="button--primary button--small" id="thisWeek">今週</button>
                <button type="button" class="button--ghost button--small" id="nextWeek">次の週</button>
              </div>
            </div>
            <div class="pool-controls__right">
              <div class="save-status" id="saveStatus">保存済み</div>
              <button type="button" class="button--primary" id="applySetFromKondate">セットを選ぶ</button>
              <button type="button" class="button--ghost button--small" id="clearWeek">リストを空にする</button>
            </div>
            <div class="pool-status" aria-live="polite">
              <div class="pool-status__bar">
                <span class="pool-status__fill" id="poolProgressBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></span>
              </div>
              <div class="pool-status__meta">
                <span class="pool-status__count" id="poolCount">0 / 0</span>
                <span class="pool-status__hint">作ったらリストが軽くなる</span>
              </div>
            </div>
          </section>

          <!-- 3. セットバナー（適用時のみ表示） -->
          <div class="applied-set-banner" id="appliedSetBanner" hidden>
            <div class="applied-set-banner__content">
              <span class="material-symbols-rounded">auto_awesome</span>
              <span class="applied-set-banner__text">今週のレシピセット <strong id="appliedSetName"></strong></span>
            </div>
            <div class="applied-set-banner__actions">
              <button type="button" class="button--ghost button--small" id="saveAsMySet">マイセットに保存</button>
              <button type="button" class="button--ghost button--small button--danger" id="clearAppliedSet">取り消し</button>
            </div>
          </div>

          <!-- 4. 今週のセット料理 -->
          <section class="pool-board" id="weekGrid" aria-live="polite"></section>
        </main>

        <footer class="footer">
          <p>
            入力は自動保存。週を切り替えるとセット料理リストと買い物リストが復元されます。
          </p>
        </footer>
      </section>

      <!-- Recipe Modal -->
      <div class="modal" id="recipeModal" hidden>
        <div class="modal__backdrop" id="recipeModalBackdrop"></div>
        <div
          class="modal__panel"
          role="dialog"
          aria-modal="true"
          aria-labelledby="recipeModalTitle"
        >
          <div class="modal__header">
            <h2 id="recipeModalTitle">レシピを登録</h2>
            <button
              type="button"
              class="button--ghost button--small"
              id="recipeModalClose"
            >
              閉じる
            </button>
          </div>
          <form id="recipeModalForm" class="modal__body">
            <section class="recipe-form__section recipe-form__section--manual">
              <div class="recipe-form__section-header">
                <h3 class="recipe-form__section-title">手入力で登録</h3>
                <p class="recipe-form__section-lead">レシピ名を入力して、そのまま登録できます。</p>
              </div>
              <label class="form-field" for="recipeModalName">
                <span>レシピ名</span>
                <input id="recipeModalName" type="text" required />
              </label>
              <label class="form-field" for="recipeModalServings">
                <span>基準人数</span>
                <select id="recipeModalServings">
                  <option value="1">1人前</option>
                  <option value="2" selected>2人前</option>
                  <option value="3">3人前</option>
                  <option value="4">4人前</option>
                </select>
              </label>
              <div class="form-field">
                <span>タグ（出典、ジャンルなど）</span>
                <div class="tag-input-wrapper">
                  <div class="tag-list" id="recipeModalTagList"></div>
                  <input id="recipeModalTagInput" type="text" placeholder="タグを入力してEnter" />
                </div>
              </div>
              <div class="form-field">
                <span>食材（1行ごとに追加）</span>
                <div class="ingredient-list__header">
                  <span>食材名</span>
                  <span>数量</span>
                  <span>単位</span>
                  <span aria-hidden="true"></span>
                </div>
                <div class="ingredient-list" id="recipeModalIngredientList"></div>
                <button
                  type="button"
                  class="button--ghost button--small"
                  id="recipeModalIngredientAdd"
                >
                  + 食材を追加
                </button>
              </div>
              <label class="form-field" for="recipeModalInstructions">
                <span>作り方メモ</span>
                <textarea id="recipeModalInstructions" rows="6" placeholder="1. 材料を切る&#10;2. フライパンで炒める&#10;3. 調味料を加える"></textarea>
              </label>
            </section>

            <section class="recipe-form__section recipe-form__section--import">
              <div class="recipe-form__section-header">
                <h3 class="recipe-form__section-title">URL/テキストから取得</h3>
                <p class="recipe-form__section-lead">取得内容は上の入力欄に反映されます。必要に応じて修正してください。</p>
              </div>
              <div class="form-field form-field--with-button">
                <span>URL（任意）</span>
                <div class="input-with-button">
                  <input id="recipeModalUrl" type="url" placeholder="https://..." />
                  <button type="button" class="button--ghost button--small" id="recipeModalFetch">
                    URLから取得
                  </button>
                  <button type="button" class="button--ghost button--small" id="recipeModalTextToggle">
                    テキストから
                  </button>
                </div>
                <p class="form-field__help" id="recipeModalFetchStatus"></p>
                <div class="text-parse-area" id="recipeModalTextArea" hidden>
                  <textarea id="recipeModalTextInput" placeholder="ツイートやレシピのテキストを貼り付け..." rows="4"></textarea>
                  <button type="button" class="button--ghost button--small" id="recipeModalTextParse">
                    テキストを解析
                  </button>
                </div>
              </div>
            </section>
            <div class="recipe-form__actions">
              <button type="submit" class="button--primary">登録</button>
              <button type="button" class="button--ghost" id="recipeModalCancel">
                キャンセル
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Weekly Sets Section (1週間を選ぶ) -->
      <section class="weekly-sets" id="weeklySets" hidden>
        <div class="app__nav">
          <button type="button" class="button--ghost button--small" id="backToLandingFromSets">
            使い方
          </button>
          <button type="button" class="button--ghost button--small" id="openAppFromSets">
            今週へ
          </button>
          <button type="button" class="button--ghost button--small" id="openSetBuilderFromSets">
            セットを作る
          </button>
          <button type="button" class="button--ghost button--small" id="openPublicRecipesFromSets">
            探索へ
          </button>
          <button type="button" class="button--ghost button--small" id="openRecipesFromSets">
            お気に入り
          </button>
        </div>

        <header class="hero">
          <a href="#landing" class="hero__help-link" id="helpLinkSets">
            <span class="material-symbols-rounded">help_outline</span>
            使い方
          </a>
          <div class="hero__text">
            <p class="eyebrow">Recipe Sets</p>
            <h1>レシピセット</h1>
            <p class="hero__lead">
              レシピを束ねて、<br />
              今週のセット料理を整える。
            </p>
          </div>
          <div class="hero__meta">
            <div class="meta__item">
              <span class="meta__label">レシピセット数</span>
              <span class="meta__value" id="setCount">--</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">お気に入り</span>
              <span class="meta__value" id="favoriteSetCount">0件</span>
            </div>
          </div>
        </header>

        <div class="explore-tabs" role="tablist" aria-label="探索タイプ">
          <button type="button" class="explore-tabs__button explore-tabs__button--active" id="exploreTabSets" role="tab" aria-selected="true">
            セット
          </button>
          <button type="button" class="explore-tabs__button" id="exploreTabRecipes" role="tab" aria-selected="false">
            レシピ
          </button>
        </div>

        <main class="weekly-sets__content">
          <!-- お気に入りセクション -->
          <section class="set-section" id="favoriteSetsSection" hidden>
            <h2 class="set-section__title">
              <span class="material-symbols-rounded">favorite</span>
              お気に入りセット
            </h2>
            <div class="set-grid" id="favoriteSetsGrid"></div>
          </section>

          <!-- マイセットセクション -->
          <section class="set-section" id="mySetsSection" hidden>
            <h2 class="set-section__title">
              <span class="material-symbols-rounded">person</span>
              マイセット
            </h2>
            <div class="set-grid" id="mySetsGrid"></div>
          </section>

          <!-- 季節別セクション -->
          <section class="set-section" id="seasonSetsSection">
            <h2 class="set-section__title">
              <span class="material-symbols-rounded">eco</span>
              季節のセット
            </h2>
            <div class="set-grid" id="seasonSetsGrid"></div>
          </section>

          <!-- シーン別セクション -->
          <section class="set-section" id="sceneSetsSection">
            <h2 class="set-section__title">
              <span class="material-symbols-rounded">restaurant</span>
              シーン別セット
            </h2>
            <div class="set-grid" id="sceneSetsGrid"></div>
          </section>

          <!-- すべてのセット -->
          <section class="set-section" id="allSetsSection">
            <h2 class="set-section__title">
              <span class="material-symbols-rounded">grid_view</span>
              すべてのセット
            </h2>
            <div class="set-grid" id="allSetsGrid"></div>
            <p class="set-section__empty" id="setsEmpty" hidden>
              セットがまだありません
            </p>
          </section>
        </main>
      </section>

      <!-- Set Builder Section -->
      <section class="set-builder" id="setBuilder" hidden>
        <div class="app__nav">
          <button type="button" class="button--ghost button--small" id="backToSetsFromBuilder">
            セット一覧へ
          </button>
          <button type="button" class="button--ghost button--small" id="openAppFromBuilder">
            今週へ
          </button>
          <button type="button" class="button--ghost button--small" id="openRecipesFromBuilder">
            お気に入り
          </button>
        </div>

        <header class="hero">
          <a href="#landing" class="hero__help-link" id="helpLinkBuilder">
            <span class="material-symbols-rounded">help_outline</span>
            使い方
          </a>
          <div class="hero__text">
            <p class="eyebrow">Build Your Set</p>
            <h1>レシピセットを作成</h1>
            <p class="hero__lead">
              好きなレシピを集めて、<br />
              自分だけのセットを作る。
            </p>
          </div>
          <div class="hero__meta">
            <div class="meta__item">
              <span class="meta__label">順番</span>
              <span class="meta__value">自由に選ぶ</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">保存</span>
              <span class="meta__value">マイセット</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">共有</span>
              <span class="meta__value">今週に反映</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">追加</span>
              <span class="meta__value">お気に入りから</span>
            </div>
          </div>
        </header>

        <main class="set-builder__content">
          <section class="set-builder__form">
            <label class="form-field" for="setBuilderName">
              <span>セット名</span>
              <input id="setBuilderName" type="text" placeholder="例：平日らくらくセット" required />
            </label>
            <label class="form-field" for="setBuilderDescription">
              <span>ひとこと</span>
              <textarea id="setBuilderDescription" rows="3" placeholder="例：疲れてる週はこのセットで回す"></textarea>
            </label>
            <div class="form-field">
              <span>タグ（任意）</span>
              <input id="setBuilderTags" type="text" placeholder="例：時短, 和食, 野菜多め" />
            </div>
            <div class="set-builder__actions">
              <button type="button" class="button--primary" id="confirmSetBuilder">セットを確定</button>
              <button type="button" class="button--ghost" id="cancelSetBuilder">キャンセル</button>
            </div>
          </section>

          <section class="set-builder__recipes">
            <div class="set-builder__header">
              <h2>レシピを選ぶ</h2>
              <input id="setBuilderSearch" type="search" placeholder="料理名・食材・タグで検索" />
            </div>
            <div class="set-builder__selected">
              <span class="set-builder__selected-label">選択中</span>
              <div class="set-builder__selected-list" id="setBuilderSelected"></div>
              <p class="set-builder__selected-empty" id="setBuilderSelectedEmpty">まだ選択されていません</p>
            </div>
            <div class="set-builder__list" id="setBuilderList"></div>
            <p class="set-builder__empty" id="setBuilderEmpty" hidden>
              まずはお気に入りレシピを登録してください
            </p>
          </section>
        </main>
      </section>

      <!-- Set Detail Modal -->
      <div class="modal" id="setDetailModal" hidden>
        <div class="modal__backdrop" id="setDetailModalBackdrop"></div>
        <div class="modal__panel modal__panel--set-detail" role="dialog" aria-modal="true" aria-labelledby="setDetailTitle">
          <div class="modal__header">
            <h2 id="setDetailTitle">セット詳細</h2>
            <div class="modal__header-actions">
              <button type="button" class="button--icon" id="setFavoriteToggle" title="お気に入り">
                <span class="material-symbols-rounded">favorite_border</span>
              </button>
              <button type="button" class="button--ghost button--small" id="setDetailModalClose">
                閉じる
              </button>
            </div>
          </div>
          <div class="modal__body set-detail" id="setDetailBody">
            <!-- Content will be injected by JS -->
          </div>
          <div class="modal__footer">
            <button type="button" class="button--primary" id="applySetButton">
              このセットを今週の候補に追加
            </button>
          </div>
        </div>
      </div>

      <!-- Set Apply Modal -->
      <div class="modal" id="setApplyModal" hidden>
        <div class="modal__backdrop" id="setApplyModalBackdrop"></div>
        <div class="modal__panel modal__panel--small" role="dialog" aria-modal="true" aria-labelledby="setApplyTitle">
          <div class="modal__header">
            <h2 id="setApplyTitle">レシピセットを追加</h2>
            <button type="button" class="button--ghost button--small" id="setApplyModalClose">
              閉じる
            </button>
          </div>
          <div class="modal__body">
            <p class="set-apply__desc" id="setApplyDesc">どの週に追加しますか？</p>
            <div class="set-apply__options">
              <button type="button" class="set-apply__option set-apply__option--active" data-week="current">
                <span class="material-symbols-rounded">today</span>
                <span>今週</span>
              </button>
              <button type="button" class="set-apply__option" data-week="next">
                <span class="material-symbols-rounded">event</span>
                <span>来週</span>
              </button>
              <button type="button" class="set-apply__option" data-week="custom">
                <span class="material-symbols-rounded">edit_calendar</span>
                <span>日付を選ぶ</span>
              </button>
            </div>
            <div class="set-apply__custom" id="setApplyCustom" hidden>
              <label class="form-field" for="setApplyDate">
                <span>開始日</span>
                <input id="setApplyDate" type="date" />
              </label>
            </div>
          </div>
          <div class="modal__footer">
            <button type="button" class="button--primary" id="confirmApplySet">
              入れる
            </button>
            <button type="button" class="button--ghost" id="cancelApplySet">
              キャンセル
            </button>
          </div>
        </div>
      </div>

      <!-- Save My Set Modal -->
      <div class="modal" id="saveMySetModal" hidden>
        <div class="modal__backdrop" id="saveMySetModalBackdrop"></div>
        <div class="modal__panel modal__panel--set-create" role="dialog" aria-modal="true" aria-labelledby="saveMySetTitle">
          <div class="modal__header">
            <h2 id="saveMySetTitle">マイセットとして保存</h2>
            <button type="button" class="button--ghost button--small" id="saveMySetModalClose">
              閉じる
            </button>
          </div>
          <div class="modal__body">
            <div class="set-create">
              <p class="set-create__lead">
                今週のセット料理をベースに、<br />
                自分だけのレシピセットを作ります。
              </p>
              <label class="form-field form-field--wide" for="mySetName">
                <span>セット名</span>
                <input id="mySetName" type="text" placeholder="例：我が家の定番1週間" required />
              </label>
              <label class="form-field form-field--wide" for="mySetNote">
                <span>ひとこと</span>
                <textarea id="mySetNote" placeholder="例：忙しい週はこのセットで回す"></textarea>
              </label>
              <div class="set-create__preview">
                <div class="set-create__preview-header">
                  <span>今週のセット料理</span>
                  <span class="set-create__preview-count" id="mySetRecipeCount"></span>
                </div>
                <div class="set-create__week" id="mySetPreviewList"></div>
                <p class="set-create__empty" id="mySetPreviewEmpty">
                  まだレシピが選ばれていません
                </p>
              </div>
            </div>
          </div>
          <div class="modal__footer">
            <button type="button" class="button--primary" id="confirmSaveMySet">
              保存する
            </button>
            <button type="button" class="button--ghost" id="cancelSaveMySet">
              キャンセル
            </button>
          </div>
        </div>
      </div>

      <!-- Recipe Complete Modal -->
      <div class="modal" id="recipeCompleteModal" hidden>
        <div class="modal__backdrop" id="recipeCompleteModalBackdrop"></div>
        <div class="modal__panel modal__panel--small" role="dialog" aria-modal="true" aria-labelledby="recipeCompleteTitle">
          <div class="modal__header">
            <h2 id="recipeCompleteTitle">レシピ登録完了</h2>
            <button type="button" class="button--ghost button--small" id="recipeCompleteClose">
              閉じる
            </button>
          </div>
          <div class="modal__body">
            <p class="complete-message" id="recipeCompleteMessage"></p>
          </div>
          <div class="modal__footer">
            <button type="button" class="button--primary" id="recipeCompleteAddToList">
              今週のリストに追加
            </button>
            <button type="button" class="button--ghost" id="recipeCompleteCreateSet">
              このレシピでセットを作る
            </button>
          </div>
        </div>
      </div>

      <!-- Set Complete Modal -->
      <div class="modal" id="setCompleteModal" hidden>
        <div class="modal__backdrop" id="setCompleteModalBackdrop"></div>
        <div class="modal__panel modal__panel--small" role="dialog" aria-modal="true" aria-labelledby="setCompleteTitle">
          <div class="modal__header">
            <h2 id="setCompleteTitle">セット作成完了</h2>
            <button type="button" class="button--ghost button--small" id="setCompleteClose">
              閉じる
            </button>
          </div>
          <div class="modal__body">
            <p class="complete-message" id="setCompleteMessage"></p>
          </div>
          <div class="modal__footer">
            <button type="button" class="button--primary" id="setCompleteApply">
              このセットで始める
            </button>
            <button type="button" class="button--ghost" id="setCompleteBack">
              セット一覧へ
            </button>
          </div>
        </div>
      </div>

      <!-- Public Recipes Section -->
      <section class="recipe-db public-recipes" id="publicRecipes" hidden>
        <div class="app__nav">
          <button
            type="button"
            class="button--ghost button--small"
            id="backToLandingFromPublic"
          >
            使い方
          </button>
          <button
            type="button"
            class="button--ghost button--small"
            id="openAppFromPublic"
          >
            今週へ
          </button>
          <button
            type="button"
            class="button--ghost button--small"
            id="openRecipesFromPublic"
          >
            お気に入り
          </button>
          <button
            type="button"
            class="button--ghost button--small"
            id="openWeeklySetsFromPublic"
          >
            セットを探す
          </button>
        </div>

        <header class="hero">
          <a href="#landing" class="hero__help-link" id="helpLinkPublic">
            <span class="material-symbols-rounded">help_outline</span>
            使い方
          </a>
          <div class="hero__text">
            <p class="eyebrow">Recipe Discovery</p>
            <h1>レシピ探索</h1>
            <p class="hero__lead">
              気になるレシピを探して、<br />
              自分のレシピ帳に追加する。
            </p>
          </div>
          <div class="hero__meta">
            <div class="meta__item">
              <span class="meta__label">レシピ数</span>
              <span class="meta__value" id="publicRecipeCount">--</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">操作</span>
              <span class="meta__value">検索 → 取り込み</span>
            </div>
          </div>
        </header>

        <div class="explore-tabs" role="tablist" aria-label="探索タイプ">
          <button type="button" class="explore-tabs__button" id="exploreTabSetsFromPublic" role="tab" aria-selected="false">
            セット
          </button>
          <button type="button" class="explore-tabs__button explore-tabs__button--active" id="exploreTabRecipesFromPublic" role="tab" aria-selected="true">
            レシピ
          </button>
        </div>

        <main class="recipe-db__content">
          <section class="recipe-list public-recipe-list">
            <div class="recipe-list__header">
              <h2>レシピを探す</h2>
              <input
                id="publicRecipeSearch"
                type="search"
                placeholder="料理名・食材・タグで検索"
                autocomplete="off"
              />
            </div>
            <div class="category-strip" aria-label="カテゴリ一覧">
              <button type="button" class="category-strip__item category-strip__item--active">全部</button>
              <button type="button" class="category-strip__item">焼く</button>
              <button type="button" class="category-strip__item">煮る</button>
              <button type="button" class="category-strip__item">炒める</button>
              <button type="button" class="category-strip__item">揚げる</button>
              <button type="button" class="category-strip__item">和える</button>
              <button type="button" class="category-strip__item">時短</button>
            </div>
            <div class="tag-filter" id="publicTagFilter">
              <span class="tag-filter__label">ジャンルで絞り込み:</span>
              <div class="tag-filter__list" id="publicTagFilterList"></div>
            </div>
            <div class="recipe-list__items" id="publicRecipeList"></div>
            <p class="recipe-list__empty" id="publicRecipeEmpty" hidden>
              該当するレシピがありません
            </p>
          </section>
        </main>
      </section>

      <!-- Recipe DB Section -->
      <section class="recipe-db" id="recipes" hidden>
        <div class="app__nav">
          <button
            type="button"
            class="button--ghost button--small"
            id="backToLandingFromRecipes"
          >
            使い方
          </button>
          <button
            type="button"
            class="button--ghost button--small"
            id="openAppFromRecipes"
          >
            今週へ
          </button>
          <button
            type="button"
            class="button--ghost button--small"
            id="openPublicRecipesFromRecipes"
          >
            探索へ
          </button>
        </div>

        <header class="hero">
          <a href="#landing" class="hero__help-link" id="helpLinkRecipes">
            <span class="material-symbols-rounded">help_outline</span>
            使い方
          </a>
          <div class="hero__text">
            <p class="eyebrow">My Picks</p>
            <h1>お気に入り</h1>
            <p class="hero__lead">
              レシピもセットも、<br />
              自分の好きだけ集めていく。
            </p>
          </div>
          <div class="hero__meta">
            <div class="meta__item">
              <span class="meta__label">保存</span>
              <span class="meta__value">ローカルストレージ</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">検索</span>
              <span class="meta__value">料理名・食材名</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">URL取得</span>
              <span class="meta__value">JSON-LD対応</span>
            </div>
            <div class="meta__item">
              <span class="meta__label">連携</span>
              <span class="meta__value">セット/今週に反映</span>
            </div>
          </div>
        </header>

        <div class="favorites-tabs" role="tablist" aria-label="お気に入りの種類">
          <button type="button" class="favorites-tabs__button favorites-tabs__button--active" id="favoriteRecipesTab" role="tab" aria-selected="true">
            レシピ
          </button>
          <button type="button" class="favorites-tabs__button" id="favoriteSetsTab" role="tab" aria-selected="false">
            セット
          </button>
        </div>

        <main class="recipe-db__content">
          <div class="favorites-panel favorites-panel--recipes" id="favoriteRecipesPanel">
            <section class="recipe-form">
              <h2 id="recipeFormTitle">レシピを追加</h2>
              <form id="recipeForm" class="recipe-form__body">
                <section class="recipe-form__section recipe-form__section--manual">
                  <div class="recipe-form__section-header">
                    <h3 class="recipe-form__section-title">手入力で登録</h3>
                    <p class="recipe-form__section-lead">レシピ名を入力して、そのまま登録できます。</p>
                  </div>
                  <label class="form-field" for="recipeName">
                    <span>レシピ名</span>
                    <input id="recipeName" type="text" required />
                  </label>
                  <label class="form-field" for="recipeServings">
                    <span>基準人数</span>
                    <select id="recipeServings">
                      <option value="1">1人前</option>
                      <option value="2" selected>2人前</option>
                      <option value="3">3人前</option>
                      <option value="4">4人前</option>
                    </select>
                  </label>
                  <div class="form-field">
                    <span>タグ（出典、ジャンルなど）</span>
                    <div class="tag-input-wrapper">
                      <div class="tag-list" id="recipeTagList"></div>
                      <input id="recipeTagInput" type="text" placeholder="タグを入力してEnter" />
                    </div>
                    <p class="form-field__help">例: クラシル, 和食, 作り置き, 時短</p>
                  </div>
                  <div class="form-field">
                    <span>食材（1行ごとに追加）</span>
                    <div class="ingredient-list__header">
                      <span>食材名</span>
                      <span>数量</span>
                      <span>単位</span>
                      <span aria-hidden="true"></span>
                    </div>
                    <div class="ingredient-list" id="ingredientList"></div>
                    <button
                      type="button"
                      class="button--ghost button--small"
                      id="ingredientAdd"
                    >
                      + 食材を追加
                    </button>
                  </div>
                  <label class="form-field" for="recipeInstructions">
                    <span>作り方メモ</span>
                    <textarea id="recipeInstructions" rows="6" placeholder="1. 材料を切る&#10;2. フライパンで炒める&#10;3. 調味料を加える"></textarea>
                  </label>
                </section>

                <section class="recipe-form__section recipe-form__section--import">
                  <div class="recipe-form__section-header">
                    <h3 class="recipe-form__section-title">URL/テキストから取得</h3>
                    <p class="recipe-form__section-lead">取得内容は上の入力欄に反映されます。必要に応じて修正してください。</p>
                  </div>
                  <div class="form-field form-field--with-button">
                    <span>URL（任意）</span>
                    <div class="input-with-button">
                      <input id="recipeUrl" type="url" placeholder="https://..." />
                      <button type="button" class="button--ghost button--small" id="recipeFetch">
                        URLから取得
                      </button>
                      <button type="button" class="button--ghost button--small" id="recipeTextToggle">
                        テキストから
                      </button>
                    </div>
                    <p class="form-field__help" id="recipeFetchStatus"></p>
                    <div class="text-parse-area" id="recipeTextArea" hidden>
                      <textarea id="recipeTextInput" placeholder="ツイートやレシピのテキストを貼り付け..." rows="4"></textarea>
                      <button type="button" class="button--ghost button--small" id="recipeTextParse">
                        テキストを解析
                      </button>
                    </div>
                  </div>
                </section>
                <div class="recipe-form__actions">
                  <button type="submit" class="button--primary" id="recipeSave">
                    登録
                  </button>
                  <button type="button" class="button--ghost" id="recipeCancel" hidden>
                    キャンセル
                  </button>
                </div>
              </form>
            </section>

            <section class="recipe-list">
              <div class="recipe-list__header">
                <h2>レシピメニュー表</h2>
                <input
                  id="recipeSearch"
                  type="search"
                  placeholder="料理名・食材・タグで検索"
                  autocomplete="off"
                />
              </div>
              <div class="tag-filter" id="tagFilter">
                <span class="tag-filter__label">タグで絞り込み:</span>
                <div class="tag-filter__list" id="tagFilterList"></div>
              </div>
              <div class="recipe-list__items" id="recipeList"></div>
            <p class="recipe-list__empty" id="recipeEmpty">
              まだレシピがありません
            </p>
            </section>
          </div>

          <div class="favorites-panel favorites-panel--sets" id="favoriteSetsPanel" hidden>
            <section class="favorite-sets">
              <div class="favorite-sets__header">
                <h2>お気に入りセット</h2>
                <input
                  id="favoriteSetSearch"
                  type="search"
                  placeholder="セット名・タグで検索"
                  autocomplete="off"
                />
              </div>
              <div class="favorite-sets__list" id="favoriteSetList"></div>
              <p class="favorite-sets__empty" id="favoriteSetEmpty" hidden>
                お気に入りのセットがありません
              </p>
            </section>
          </div>
        </main>
      </section>
    </div>

    <div class="loading-overlay" id="loadingOverlay" hidden>
      <div class="loading-spinner"></div>
      <p class="loading-text" id="loadingText">解析中...</p>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-nav" id="mobileNav" hidden aria-label="メインナビゲーション">
      <a href="#app" class="mobile-nav__item" data-nav="kondate" aria-current="page">
        <span class="mobile-nav__icon material-symbols-rounded">format_list_bulleted</span>
        <span class="mobile-nav__label">今週</span>
      </a>
      <a href="#publicRecipes" class="mobile-nav__item" data-nav="publicRecipes">
        <span class="mobile-nav__icon material-symbols-rounded">search</span>
        <span class="mobile-nav__label">探索</span>
      </a>
      <a href="#recipes" class="mobile-nav__item" data-nav="recipes">
        <span class="mobile-nav__icon material-symbols-rounded">favorite</span>
        <span class="mobile-nav__label">お気に入り</span>
      </a>
    </nav>

    <!-- Toast Notification -->
    <div class="toast" id="toast" hidden>
      <span class="toast__message" id="toastMessage"></span>
    </div>

    <!-- Recipe Detail Modal -->
    <div class="modal" id="recipeDetailModal" hidden>
      <div class="modal__backdrop" id="recipeDetailModalBackdrop"></div>
      <div class="modal__panel modal__panel--detail" role="dialog" aria-modal="true" aria-labelledby="recipeDetailTitle">
        <div class="modal__header">
          <h2 id="recipeDetailTitle">レシピ詳細</h2>
          <button type="button" class="button--ghost button--small" id="recipeDetailModalClose">
            閉じる
          </button>
        </div>
        <div class="modal__body" id="recipeDetailBody">
          <!-- Content will be injected by JS -->
        </div>
        <div class="modal__footer">
          <button type="button" class="button--primary" id="recipeDetailImport">
            レシピに追加
          </button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
